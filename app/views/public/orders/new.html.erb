<div class = "container">
  <%= form_with model: @order, url: orders_confirm_path do |f| %>
  <%= render 'layouts/errors', resource: @order %>
  <h4>支払い方法</h4>
  <!--モデルに記述したenumを用いて支払い方法を表示。keyをenumの設定した数字にする-->
  <%= f.radio_button :payment_method, Order.payment_methods.key(0) %>
  <%= f.label :payment_method, Order.payment_methods_i18n[:credit_card] %>
  <%= f.radio_button :payment_method, Order.payment_methods.key(1) %>
  <%= f.label :payment_method, Order.payment_methods_i18n[:bank_transfer] %>

  <h3>お届け先</h3>

  <p><%= f.radio_button :select_address, 0 %>ご自身の住所</p>
  <p>〒<%= current_customer.postal_code %> <%= current_customer.address %></p>
  <!--full_nameメソッドをモデルに定義して呼び出し-->
	<p><%= current_customer.full_name %></p>

  <!--options_from_collection_for_selectメソッドを使ってaddressからデータを持ってくる-->
  <p> <%= f.radio_button :select_address, 1 %>登録済み住所</p>
  <p><%= f.select :address_id , options_from_collection_for_select(current_customer.deliveries, :id, :full_address) %></p>

  <p> <%= f.radio_button :select_address, 2 %>新しいお届け先</p>

  <table>
    <tr>
      <td>郵便番号</td>
      <td> <%= f.text_field :postcode %></td>
    </tr>
    <tr>
      <td>住所</td>
      <td><%= f.text_field :ship_to_address %></td>
    </tr>
    <tr>
      <td>宛名</td>
      <td><%= f.text_field :ship_name %></td>
    </tr>
  </table>

  <%= f.submit "確認画面へ進む" %>

<% end %>
</div>

